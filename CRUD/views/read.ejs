<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <%- include boot-partial.ejs %>
  <title>READ</title>
</head>
<body>
  <%- include ../script/update.js %>
  <div class="container">
    <!--Table of Note Schema-->
  <table class="table table table-hover">
                <tr>
                    <th>NUM</th>
                    <th>NAME</th>
                    <th>BODY</th>
                    <th>USER</th>
                    <th>DATE</th>
                    <th></th>
                    <th></th>
                </tr>
                <%
                var count=0;
                    noteInfo.forEach(function(note){
                %>
                <tr>
                  <%count++;%>
                    <td><%=count%></td>
                    <td><%=note.note_name%></td>
                    <td><%=note.note_body%></td>
                    <td><%=note.user_name%></td>
                    <td><%=note.date%></td>
                    <!--Data can be identified in the query. And Be careful with href="#myModal"-->
                    <!--If you click on this link, update Modal will pop up.-->
                    <td><a data-toggle="modal" class="myModal_update_a" href="#myModal" data-notename=<%=note.note_name %>
                      data-notebody=<%=note.note_body %> data-username=<%=note.user_name %>
                      data-id=<%=note.id%>
                      id="myModal_click">수정하기</a></td>
                      <td><a href="/delete/<%=note.id%>">삭제하기</a></td>
                </tr>
                <%
                    });
                %>
            </table>
            <br>
            <!--If you click on this link, add Modal will pop up.-->
            <a data-toggle="modal" href="#myModal_add" id="myModal_add_click">추가하기</a><br>
            <a href="/">BACK TO MAIN</a>

            <!-- update Modal -->
  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
          <h4 class="modal-title" id="myModalLabel">수정하기</h4>
        </div>
        <div class="modal-body">
          <form action="/update" method="get">
            <div class="form-group">
              <!--Be careful with input type="hidden"-->
              <input type="hidden" class="form-control" name="note_id" id="note_id">
            </div>
            <div class="form-group">
              <label for="exampleText1">제목</label>
              <input type="text" class="form-control" name="note_name" id="note_name" placeholder="제목을 입력하세요">
            </div>
            <div class="form-group">
              <label for="exampleTextarea">글</label>
              <textarea class="form-control" name="note_body" id="note_body" rows="7" placeholder="본문을 입력하세요."></textarea>
              <!--<input type="textarea" class="form-control" id="exampleInputPassword2" placeholder="본문을 입력하세요.">-->
            </div>
            <div class="form-group">
              <label for="exampleText2">작성자</label>
              <input type="text" class="form-control" name="user_name" id="user_name" placeholder="사용자를 입력하세요.">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Save changes</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    </div>


  <!-- add Modal -->
  <!--add Modal does not require a second query.-->
<div class="modal fade" id="myModal_add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
<h4 class="modal-title" id="myModalLabel">추가하기</h4>
</div>
<div class="modal-body">
<form action="/schema_add" method="get">
  <div class="form-group">
    <label for="exampleText1">제목</label>
    <input type="text" class="form-control" name="note_name" id="note_name" placeholder="제목을 입력하세요">
  </div>
  <div class="form-group">
    <label for="exampleTextarea">글</label>
    <textarea class="form-control" name="note_body" id="note_body" rows="7" placeholder="본문을 입력하세요."></textarea>
    <!--<input type="textarea" class="form-control" id="exampleInputPassword2" placeholder="본문을 입력하세요.">-->
  </div>
  <div class="form-group">
    <label for="exampleText2">작성자</label>
    <input type="text" class="form-control" name="user_name" id="user_name" placeholder="사용자를 입력하세요.">
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    <button type="submit" class="btn btn-primary">Save ADD</button>
  </div>
</form>
</div>
</div>
</div>
</div>
</div>

</body>
</html>
